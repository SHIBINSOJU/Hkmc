<nav class="navbar">
    <div class="nav-pill">
        <a href="/" class="nav-logo">
            <img src="/images/logo.png" alt="HKMC" onerror="this.style.display='none'"> 
            <span class="logo-text">HKMC</span>
        </a>

        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

        <ul class="nav-list desktop-only">
            <li><a href="/" class="nav-link <%= page === 'home' ? 'active' : '' %>">Home</a></li>
            <li><a href="/leaderboard" class="nav-link <%= page === 'leaderboard' ? 'active' : '' %>">Stats</a></li>
            <li><a href="/donate" class="nav-link <%= page === 'donate' ? 'active' : '' %>" style="color: #ffd700;">Support ❤️</a></li>
            <li><a href="/vote" class="nav-link <%= page === 'vote' ? 'active' : '' %>">Vote</a></li>
        </ul>

        <div class="mobile-menu-overlay">
            <a href="/" class="mobile-link">Home</a>
            <a href="/leaderboard" class="mobile-link">Stats</a>
            <a href="/donate" class="mobile-link" style="color: #ffd700;">Support ❤️</a>
            <a href="/vote" class="mobile-link">Vote</a>
            <a href="https://discord.gg/yourinvite" class="mobile-discord-btn">Join Discord</a>
        </div>
    </div>
</nav>

<script>
    const toggle = document.getElementById('mobile-menu');
    const overlay = document.querySelector('.mobile-menu-overlay');
    const bars = document.querySelectorAll('.bar');

    toggle.addEventListener('click', () => {
        overlay.classList.toggle('active');
        toggle.classList.toggle('open');
        
        // Prevent scrolling when menu is open
        if(overlay.classList.contains('active')) {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = 'auto';
        }
    });
</script>

<style>
    /* --- FLOATING NAVBAR CONTAINER --- */
    .navbar {
        position: fixed;
        top: 20px; /* Distance from top */
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        z-index: 1000;
        padding: 0 20px; /* Safety padding for mobile edges */
        box-sizing: border-box;
    }

    /* --- THE "PILL" SHAPE --- */
    .nav-pill {
        background: rgba(10, 10, 10, 0.85); /* Dark semi-transparent */
        backdrop-filter: blur(15px);        /* Glass blur */
        -webkit-backdrop-filter: blur(15px);
        
        width: 100%;
        max-width: 900px; /* Limits width on big screens */
        height: 70px;
        
        border-radius: 50px; /* MAKES IT ROUND (The Pill Shape) */
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); /* Shadow for depth */
        
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 30px;
        box-sizing: border-box;
    }

    /* --- LOGO --- */
    .nav-logo {
        display: flex;
        align-items: center;
        text-decoration: none;
        gap: 10px;
    }
    .nav-logo img { height: 35px; }
    .logo-text {
        font-family: 'Outfit', sans-serif;
        font-weight: 800;
        font-size: 1.4rem;
        color: white;
        letter-spacing: 1px;
    }

    /* --- DESKTOP LINKS --- */
    .nav-list {
        display: flex;
        list-style: none;
        gap: 30px;
        margin: 0;
        padding: 0;
    }
    .nav-link {
        color: #aaa;
        text-decoration: none;
        font-weight: 600;
        font-size: 1rem;
        transition: 0.3s;
        text-transform: uppercase;
        font-size: 0.9rem;
    }
    .nav-link:hover, .nav-link.active {
        color: white;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }

    /* --- HAMBURGER MENU (Mobile) --- */
    .menu-toggle {
        display: none; /* Hidden on desktop */
        flex-direction: column;
        gap: 6px;
        cursor: pointer;
        z-index: 1002; /* Above overlay */
    }
    .bar {
        width: 25px;
        height: 3px;
        background: white;
        border-radius: 5px;
        transition: 0.3s;
    }

    /* Hamburger Animation */
    .menu-toggle.open .bar:nth-child(1) { transform: translateY(9px) rotate(45deg); background: #ff1a1a; }
    .menu-toggle.open .bar:nth-child(2) { opacity: 0; }
    .menu-toggle.open .bar:nth-child(3) { transform: translateY(-9px) rotate(-45deg); background: #ff1a1a; }

    /* --- MOBILE OVERLAY (Full Screen Menu) --- */
    .mobile-menu-overlay {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: #000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 40px;
        transform: translateY(-100%); /* Hidden top */
        transition: 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        z-index: 999; /* Below the pill but above content */
    }
    .mobile-menu-overlay.active { transform: translateY(0); }

    .mobile-link {
        font-size: 2rem;
        color: white;
        text-decoration: none;
        font-weight: bold;
        text-transform: uppercase;
    }
    
    .mobile-discord-btn {
        background: #5865F2;
        color: white;
        padding: 15px 50px;
        border-radius: 50px;
        text-decoration: none;
        font-weight: bold;
        font-size: 1.2rem;
    }

    /* --- RESPONSIVENESS --- */
    @media (max-width: 768px) {
        .desktop-only { display: none; }
        .menu-toggle { display: flex; }
        
        /* Adjust pill for mobile */
        .nav-pill {
            padding: 0 20px;
            height: 60px;
        }
        .navbar { top: 15px; }
    }
</style>
